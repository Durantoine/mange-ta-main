

<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Performance et Optimisations &mdash; Documentation Mange Ta Main 0.1.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=897fae25"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/translations.js?v=e6b791cb"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Guide de contribution" href="contributing.html" />
    <link rel="prev" title="Personas et Segmentation Utilisateurs" href="personas.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mange Ta Main
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table des matières:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="backend/index.html">Backend Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="frontend/index.html">Frontend Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference Complète</a></li>
<li class="toctree-l1"><a class="reference internal" href="personas.html">Personas et Segmentation Utilisateurs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Performance et Optimisations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vue-d-ensemble">Vue d’ensemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optimisations-memoire">Optimisations Mémoire</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#chunked-processing">Chunked Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimisation-des-types">Optimisation des types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lazy-loading">Lazy Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drop-columns">Drop Columns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performance-backend">Performance Backend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fastapi">FastAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#caching">Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependency-injection">Dependency Injection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performance-frontend">Performance Frontend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#streamlit-caching">Streamlit Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lazy-components">Lazy Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pagination">Pagination</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#metriques-de-performance">Métriques de Performance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#backend-benchmarks">Backend Benchmarks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frontend-benchmarks">Frontend Benchmarks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utilisation-memoire">Utilisation Mémoire</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#optimisations-infrastructure">Optimisations Infrastructure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kubernetes">Kubernetes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bonnes-pratiques">Bonnes Pratiques</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#developpement">Développement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#production">Production</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#limites-connues">Limites Connues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#actuelles">Actuelles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#futures-ameliorations">Futures Améliorations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#outils-de-monitoring">Outils de Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metriques-a-surveiller">Métriques à surveiller</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dashboard-grafana">Dashboard Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alertes">Alertes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">Références</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Guide de contribution</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mange Ta Main</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Performance et Optimisations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/performance.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="performance-et-optimisations">
<h1>Performance et Optimisations<a class="headerlink" href="#performance-et-optimisations" title="Lien vers cette rubrique"></a></h1>
<p>Le projet Mange Ta Main gère des datasets volumineux (1.2 GB+) et implémente plusieurs optimisations pour garantir de bonnes performances.</p>
<section id="vue-d-ensemble">
<h2>Vue d’ensemble<a class="headerlink" href="#vue-d-ensemble" title="Lien vers cette rubrique"></a></h2>
<p><strong>Datasets</strong> :</p>
<ul class="simple">
<li><p>Recipes : ~260 MB (cleaned), ~281 MB (raw)</p></li>
<li><p>Interactions : ~308 MB (cleaned), ~333 MB (raw)</p></li>
<li><p>Total : <strong>1.2 GB</strong> de données en mémoire</p></li>
</ul>
<p><strong>Performance</strong> :</p>
<ul class="simple">
<li><p>Cold start : 2-3 secondes</p></li>
<li><p>Warm requests : &lt; 100ms</p></li>
<li><p>Memory optimization : 30-50% de réduction</p></li>
</ul>
</section>
<section id="optimisations-memoire">
<h2>Optimisations Mémoire<a class="headerlink" href="#optimisations-memoire" title="Lien vers cette rubrique"></a></h2>
<section id="chunked-processing">
<h3>Chunked Processing<a class="headerlink" href="#chunked-processing" title="Lien vers cette rubrique"></a></h3>
<p>Pour les opérations sur de grands datasets, le code utilise un traitement par chunks :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">compute_user_segments</span><span class="p">(</span><span class="n">df_recipes</span><span class="p">,</span> <span class="n">df_interactions</span><span class="p">):</span>
    <span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">10_000</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="n">chunk_size</span><span class="p">):</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">chunk_size</span><span class="p">]</span>
        <span class="n">processed</span> <span class="o">=</span> <span class="n">process_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">processed</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Avantages</strong> :</p>
<ul class="simple">
<li><p>Réduit l’utilisation mémoire de 30-50%</p></li>
<li><p>Évite les pics mémoire</p></li>
<li><p>Permet le traitement de datasets &gt; RAM</p></li>
</ul>
</section>
<section id="optimisation-des-types">
<h3>Optimisation des types<a class="headerlink" href="#optimisation-des-types" title="Lien vers cette rubrique"></a></h3>
<p>Conversion des types de données pour réduire l’empreinte mémoire :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Int64 → Int32 (divise par 2 la taille)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

<span class="c1"># Float64 → Float32 (divise par 2 la taille)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>

<span class="c1"># Object → Category (réduction 50-90% si peu de valeurs uniques)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Gains typiques</strong> :</p>
<ul class="simple">
<li><p>int64 → int32 : -50% mémoire</p></li>
<li><p>float64 → float32 : -50% mémoire</p></li>
<li><p>object → category : -50% à -90% mémoire (si &lt; 50% valeurs uniques)</p></li>
</ul>
</section>
<section id="lazy-loading">
<h3>Lazy Loading<a class="headerlink" href="#lazy-loading" title="Lien vers cette rubrique"></a></h3>
<p>Les données ne sont chargées qu’à la première requête :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DataAnalyzer</span><span class="p">:</span>
    <span class="n">_recipes_cache</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_interactions_cache</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_recipes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recipes_cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_recipes_cache</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_recipes</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recipes_cache</span>
</pre></div>
</div>
<p><strong>Avantages</strong> :</p>
<ul class="simple">
<li><p>Démarrage rapide (&lt; 1s)</p></li>
<li><p>Mémoire utilisée uniquement si nécessaire</p></li>
<li><p>Cache persistant entre requêtes</p></li>
</ul>
</section>
<section id="drop-columns">
<h3>Drop Columns<a class="headerlink" href="#drop-columns" title="Lien vers cette rubrique"></a></h3>
<p>Suppression des colonnes inutilisées après chargement :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Garder uniquement les colonnes nécessaires</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;minutes&#39;</span><span class="p">,</span> <span class="s1">&#39;contributor_id&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">]]</span>

<span class="c1"># Drop des colonnes textuelles volumineuses</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;steps&#39;</span><span class="p">,</span> <span class="s1">&#39;ingredients&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Gains</strong> : 20-40% de réduction mémoire</p>
</section>
</section>
<section id="performance-backend">
<h2>Performance Backend<a class="headerlink" href="#performance-backend" title="Lien vers cette rubrique"></a></h2>
<section id="fastapi">
<h3>FastAPI<a class="headerlink" href="#fastapi" title="Lien vers cette rubrique"></a></h3>
<p><strong>Async/Await</strong> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/user-segments&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_user_segments</span><span class="p">(</span><span class="n">analyzer</span><span class="p">:</span> <span class="n">DataAnalyzer</span><span class="p">):</span>
    <span class="c1"># Traitement async pour ne pas bloquer</span>
    <span class="n">segments</span> <span class="o">=</span> <span class="k">await</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">compute_segments_async</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">segments</span>
</pre></div>
</div>
<p><strong>Avantages</strong> :</p>
<ul class="simple">
<li><p>Gère plusieurs requêtes simultanées</p></li>
<li><p>Ne bloque pas sur les opérations I/O</p></li>
<li><p>Meilleur throughput</p></li>
</ul>
</section>
<section id="caching">
<h3>Caching<a class="headerlink" href="#caching" title="Lien vers cette rubrique"></a></h3>
<p>Les résultats coûteux sont cachés en mémoire :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">lru_cache</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">compute_expensive_analysis</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="c1"># Calcul coûteux</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">heavy_computation</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p><strong>TTL</strong> : Cache valide jusqu’au redémarrage du service</p>
</section>
<section id="dependency-injection">
<h3>Dependency Injection<a class="headerlink" href="#dependency-injection" title="Lien vers cette rubrique"></a></h3>
<p>Réutilisation des instances via le container :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
<span class="n">container</span><span class="o">.</span><span class="n">wire</span><span class="p">(</span><span class="n">modules</span><span class="o">=</span><span class="p">[</span><span class="vm">__name__</span><span class="p">])</span>

<span class="c1"># Instance singleton réutilisée</span>
<span class="n">analyzer</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">data_analyzer</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Avantages</strong> :</p>
<ul class="simple">
<li><p>Pas de rechargement des données</p></li>
<li><p>Partage du cache entre requêtes</p></li>
<li><p>Moins d’allocations mémoire</p></li>
</ul>
</section>
</section>
<section id="performance-frontend">
<h2>Performance Frontend<a class="headerlink" href="#performance-frontend" title="Lien vers cette rubrique"></a></h2>
<section id="streamlit-caching">
<h3>Streamlit Caching<a class="headerlink" href="#streamlit-caching" title="Lien vers cette rubrique"></a></h3>
<p>Utilisation intensive du cache Streamlit :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@st</span><span class="o">.</span><span class="n">cache_data</span><span class="p">(</span><span class="n">ttl</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span>  <span class="c1"># Cache 1 heure</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_dataset</span><span class="p">(</span><span class="n">dataset_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_URL</span><span class="si">}</span><span class="s2">/load-data?data_type=</span><span class="si">{</span><span class="n">dataset_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>Avantages</strong> :</p>
<ul class="simple">
<li><p>Pas de rechargement à chaque interaction</p></li>
<li><p>Mémoire partagée entre sessions</p></li>
<li><p>TTL configurable</p></li>
</ul>
</section>
<section id="lazy-components">
<h3>Lazy Components<a class="headerlink" href="#lazy-components" title="Lien vers cette rubrique"></a></h3>
<p>Les composants ne sont chargés que s’ils sont visibles :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Chargement uniquement si l&#39;onglet est sélectionné</span>
<span class="k">if</span> <span class="n">tab</span> <span class="o">==</span> <span class="s2">&quot;Personas&quot;</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">components.tab05_personnas</span><span class="w"> </span><span class="kn">import</span> <span class="n">render_personnas</span>
    <span class="n">render_personnas</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="pagination">
<h3>Pagination<a class="headerlink" href="#pagination" title="Lien vers cette rubrique"></a></h3>
<p>Affichage paginé pour les grands datasets :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Afficher seulement les 100 premières lignes</span>
<span class="n">st</span><span class="o">.</span><span class="n">dataframe</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>

<span class="c1"># Option de téléchargement pour le dataset complet</span>
<span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span><span class="s2">&quot;Download full dataset&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
<section id="metriques-de-performance">
<h2>Métriques de Performance<a class="headerlink" href="#metriques-de-performance" title="Lien vers cette rubrique"></a></h2>
<section id="backend-benchmarks">
<h3>Backend Benchmarks<a class="headerlink" href="#backend-benchmarks" title="Lien vers cette rubrique"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Endpoint</p></th>
<th class="head"><p>Cold Start</p></th>
<th class="head"><p>Warm (p50)</p></th>
<th class="head"><p>Warm (p95)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/health</span></code></p></td>
<td><p>&lt; 10ms</p></td>
<td><p>&lt; 5ms</p></td>
<td><p>&lt; 10ms</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">/load-data?type=recipes</span></code></p></td>
<td><p>2-3s</p></td>
<td><p>&lt; 50ms</p></td>
<td><p>&lt; 100ms</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/most-recipes-contributors</span></code></p></td>
<td><p>500ms</p></td>
<td><p>50ms</p></td>
<td><p>100ms</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">/user-segments</span></code></p></td>
<td><p>5-8s</p></td>
<td><p>200ms</p></td>
<td><p>500ms</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/review-trend</span></code></p></td>
<td><p>1-2s</p></td>
<td><p>80ms</p></td>
<td><p>150ms</p></td>
</tr>
</tbody>
</table>
</section>
<section id="frontend-benchmarks">
<h3>Frontend Benchmarks<a class="headerlink" href="#frontend-benchmarks" title="Lien vers cette rubrique"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 30.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Page</p></th>
<th class="head"><p>Initial Load</p></th>
<th class="head"><p>Re-render</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Landing page</p></td>
<td><p>&lt; 1s</p></td>
<td><p>&lt; 100ms</p></td>
</tr>
<tr class="row-odd"><td><p>Data visualization</p></td>
<td><p>2-3s</p></td>
<td><p>&lt; 200ms</p></td>
</tr>
<tr class="row-even"><td><p>Analysis dashboard</p></td>
<td><p>3-5s</p></td>
<td><p>&lt; 300ms</p></td>
</tr>
<tr class="row-odd"><td><p>Personas</p></td>
<td><p>5-8s</p></td>
<td><p>&lt; 400ms</p></td>
</tr>
</tbody>
</table>
</section>
<section id="utilisation-memoire">
<h3>Utilisation Mémoire<a class="headerlink" href="#utilisation-memoire" title="Lien vers cette rubrique"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Service</p></th>
<th class="head"><p>Base</p></th>
<th class="head"><p>Avec Données</p></th>
<th class="head"><p>Peak</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Backend (cold)</p></td>
<td><p>50 MB</p></td>
<td><p>450 MB</p></td>
<td><p>520 MB</p></td>
</tr>
<tr class="row-odd"><td><p>Backend (optimized)</p></td>
<td><p>50 MB</p></td>
<td><p>280 MB</p></td>
<td><p>350 MB</p></td>
</tr>
<tr class="row-even"><td><p>Frontend</p></td>
<td><p>100 MB</p></td>
<td><p>200 MB</p></td>
<td><p>250 MB</p></td>
</tr>
</tbody>
</table>
<p><strong>Réduction totale</strong> : ~40% grâce aux optimisations</p>
</section>
</section>
<section id="optimisations-infrastructure">
<h2>Optimisations Infrastructure<a class="headerlink" href="#optimisations-infrastructure" title="Lien vers cette rubrique"></a></h2>
<section id="docker">
<h3>Docker<a class="headerlink" href="#docker" title="Lien vers cette rubrique"></a></h3>
<p><strong>Multi-stage build</strong> :</p>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="c"># Stage 1: Build</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.11-slim</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="s">builder</span>
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>dependencies

<span class="c"># Stage 2: Runtime</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.11-slim</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder<span class="w"> </span>/root/.local<span class="w"> </span>/root/.local
</pre></div>
</div>
<p><strong>Gains</strong> : Image finale 50% plus petite</p>
<p><strong>Resource limits</strong> :</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">backend</span><span class="p">:</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">          </span><span class="nt">cpus</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2.0&#39;</span>
<span class="w">          </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1G</span>
<span class="w">        </span><span class="nt">reservations</span><span class="p">:</span>
<span class="w">          </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">512M</span>
</pre></div>
</div>
</section>
<section id="kubernetes">
<h3>Kubernetes<a class="headerlink" href="#kubernetes" title="Lien vers cette rubrique"></a></h3>
<p><strong>Horizontal Pod Autoscaling</strong> :</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">autoscaling/v2</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HorizontalPodAutoscaler</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend-hpa</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">scaleTargetRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>
<span class="w">  </span><span class="nt">minReplicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">maxReplicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="nt">metrics</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Resource</span>
<span class="w">    </span><span class="nt">resource</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<span class="w">      </span><span class="nt">target</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Utilization</span>
<span class="w">        </span><span class="nt">averageUtilization</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">70</span>
</pre></div>
</div>
<p><strong>Health checks</strong> :</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">livenessProbe</span><span class="p">:</span>
<span class="w">  </span><span class="nt">httpGet</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/mange_ta_main/health</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
<span class="w">  </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">  </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="nt">readinessProbe</span><span class="p">:</span>
<span class="w">  </span><span class="nt">httpGet</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/mange_ta_main/health</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
<span class="w">  </span><span class="nt">initialDelaySeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">periodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>
</section>
</section>
<section id="bonnes-pratiques">
<h2>Bonnes Pratiques<a class="headerlink" href="#bonnes-pratiques" title="Lien vers cette rubrique"></a></h2>
<section id="developpement">
<h3>Développement<a class="headerlink" href="#developpement" title="Lien vers cette rubrique"></a></h3>
<ol class="arabic">
<li><p><strong>Profiler régulièrement</strong> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cProfile</span>
<span class="n">cProfile</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;my_function()&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Monitorer la mémoire</strong> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Memory: </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">memory_info</span><span class="p">()</span><span class="o">.</span><span class="n">rss</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1024</span><span class="si">}</span><span class="s2"> MB&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Utiliser memory_profiler</strong> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>memory_profiler
python<span class="w"> </span>-m<span class="w"> </span>memory_profiler<span class="w"> </span>script.py
</pre></div>
</div>
</li>
</ol>
</section>
<section id="production">
<h3>Production<a class="headerlink" href="#production" title="Lien vers cette rubrique"></a></h3>
<ol class="arabic simple">
<li><p><strong>Logging</strong> : Utiliser structlog pour des logs structurés</p></li>
<li><p><strong>Monitoring</strong> : Prometheus + Grafana pour les métriques</p></li>
<li><p><strong>Alerting</strong> : Alertes sur usage mémoire &gt; 80%</p></li>
<li><p><strong>Rate limiting</strong> : Limiter les requêtes par IP</p></li>
<li><p><strong>CDN</strong> : Utiliser un CDN pour les assets statiques</p></li>
</ol>
</section>
</section>
<section id="limites-connues">
<h2>Limites Connues<a class="headerlink" href="#limites-connues" title="Lien vers cette rubrique"></a></h2>
<section id="actuelles">
<h3>Actuelles<a class="headerlink" href="#actuelles" title="Lien vers cette rubrique"></a></h3>
<ul class="simple">
<li><p><strong>Pas de pagination API</strong> : Tous les résultats retournés en une fois</p></li>
<li><p><strong>Pas de streaming</strong> : Toutes les données en mémoire</p></li>
<li><p><strong>Cache simple</strong> : Pas de TTL ni d’invalidation intelligente</p></li>
<li><p><strong>Pas de compression</strong> : Réponses JSON non compressées</p></li>
</ul>
</section>
<section id="futures-ameliorations">
<h3>Futures Améliorations<a class="headerlink" href="#futures-ameliorations" title="Lien vers cette rubrique"></a></h3>
<ol class="arabic simple">
<li><p><strong>Pagination</strong> : Implémenter limit/offset sur tous les endpoints</p></li>
<li><p><strong>Streaming</strong> : Utiliser FastAPI streaming responses</p></li>
<li><p><strong>Redis Cache</strong> : Cache distribué avec TTL</p></li>
<li><p><strong>Compression gzip</strong> : Réduire taille des réponses de 70%</p></li>
<li><p><strong>Database</strong> : PostgreSQL pour requêtes plus complexes</p></li>
<li><p><strong>Indexing</strong> : Index sur colonnes fréquemment queryées</p></li>
<li><p><strong>Query optimization</strong> : Requêtes SQL optimisées</p></li>
<li><p><strong>CDN</strong> : CloudFlare pour cache edge</p></li>
</ol>
</section>
</section>
<section id="outils-de-monitoring">
<h2>Outils de Monitoring<a class="headerlink" href="#outils-de-monitoring" title="Lien vers cette rubrique"></a></h2>
<section id="metriques-a-surveiller">
<h3>Métriques à surveiller<a class="headerlink" href="#metriques-a-surveiller" title="Lien vers cette rubrique"></a></h3>
<ul class="simple">
<li><p><strong>Latence</strong> : p50, p95, p99 par endpoint</p></li>
<li><p><strong>Mémoire</strong> : Usage, peak, tendance</p></li>
<li><p><strong>CPU</strong> : Utilisation moyenne et peaks</p></li>
<li><p><strong>Requêtes</strong> : QPS (queries per second)</p></li>
<li><p><strong>Erreurs</strong> : Taux d’erreur 4xx et 5xx</p></li>
</ul>
</section>
<section id="dashboard-grafana">
<h3>Dashboard Grafana<a class="headerlink" href="#dashboard-grafana" title="Lien vers cette rubrique"></a></h3>
<p>Créer des dashboards pour :</p>
<ul class="simple">
<li><p>Latence par endpoint</p></li>
<li><p>Utilisation mémoire/CPU</p></li>
<li><p>Request rate</p></li>
<li><p>Error rate</p></li>
<li><p>Response time distribution</p></li>
</ul>
</section>
<section id="alertes">
<h3>Alertes<a class="headerlink" href="#alertes" title="Lien vers cette rubrique"></a></h3>
<p>Configurer des alertes pour :</p>
<ul class="simple">
<li><p>Mémoire &gt; 80% pendant 5 minutes</p></li>
<li><p>CPU &gt; 80% pendant 5 minutes</p></li>
<li><p>Latence p95 &gt; 1s</p></li>
<li><p>Error rate &gt; 1%</p></li>
<li><p>Service down</p></li>
</ul>
</section>
</section>
<section id="references">
<h2>Références<a class="headerlink" href="#references" title="Lien vers cette rubrique"></a></h2>
<ul class="simple">
<li><p><strong>FastAPI Performance</strong> : <a class="reference external" href="https://fastapi.tiangolo.com/deployment/performance/">https://fastapi.tiangolo.com/deployment/performance/</a></p></li>
<li><p><strong>Pandas Optimization</strong> : <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/enhancingperf.html">https://pandas.pydata.org/docs/user_guide/enhancingperf.html</a></p></li>
<li><p><strong>Memory Profiling</strong> : <a class="reference external" href="https://github.com/pythonprofilers/memory_profiler">https://github.com/pythonprofilers/memory_profiler</a></p></li>
<li><p><strong>Streamlit Caching</strong> : <a class="reference external" href="https://docs.streamlit.io/library/advanced-features/caching">https://docs.streamlit.io/library/advanced-features/caching</a></p></li>
</ul>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Lien vers cette rubrique"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="architecture.html"><span class="doc">Architecture</span></a> - Architecture du projet</p></li>
<li><p><a class="reference internal" href="api.html"><span class="doc">API Reference Complète</span></a> - Documentation API</p></li>
<li><p><a class="reference internal" href="installation.html"><span class="doc">Installation</span></a> - Guide d’installation</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="personas.html" class="btn btn-neutral float-left" title="Personas et Segmentation Utilisateurs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="contributing.html" class="btn btn-neutral float-right" title="Guide de contribution" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2025, Équipe Mange Ta Main.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>